<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Browse Acts | Geneius Entertainment</title>

  <!-- Google tag (gtag.js) -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-MR1NLPH5ZK"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'G-MR1NLPH5ZK');
  </script>

  <style>
    :root{ 
      --bg:#000; --ink:#f5f5f5; --muted:#bfbfbf; 
      --gold:#C99700; --accent:#2a210c; --line:rgba(255,255,255,.12);
    }
    *{box-sizing:border-box}
    body{margin:0;background:var(--bg);color:var(--ink);font-family:"Trebuchet MS",Arial,sans-serif}
    .wrap{width:min(1120px,92vw);margin:0 auto;padding:28px 0 40px}

    /* Back to Home bar (sticky) */
    .backbar{
      position:sticky;top:0;z-index:10;
      background:rgba(0,0,0,.85);
      backdrop-filter:saturate(1.2) blur(6px);
      border-bottom:1px solid rgba(255,255,255,.08);
      padding:10px 14px;
    }
    .backbar a{
      display:inline-block;text-decoration:none;font-weight:700;
      color:#C99700;padding:8px 12px;border:1px solid rgba(201,151,0,.55);
      border-radius:10px;
    }
    .backbar a:hover{background:#1b1710;color:#ffd76a;}

    header{display:flex;align-items:center;gap:16px;justify-content:center;margin:8px 0 18px}
    header img{height:70px;width:auto}
    h1{margin:6px 0 0;font-size:1.6rem;color:var(--gold);letter-spacing:1px}
    p.sub{color:var(--muted);margin:0 0 14px;text-align:center}

    #acts-search{width:100%;max-width:720px;display:block;margin:10px auto 8px;padding:12px 14px;background:#13131a;border:1px solid var(--line);border-radius:10px;color:#eee}

    .chips{display:flex;flex-wrap:wrap;gap:8px;justify-content:center;margin:8px 0 18px}
    .chip{padding:.38rem .7rem;border-radius:999px;background:#111;border:1px solid var(--line);color:#ddd;cursor:pointer;user-select:none;font-size:.92rem}
    .chip.active{background:var(--accent);border-color:var(--gold);color:#ffd76a}

    /* Uniform cards (match Singers/Tributes/Bands) */
    .grid{display:grid;gap:16px;grid-template-columns:repeat(auto-fit,minmax(280px,1fr));margin-top:8px}
    .card{background:#15151b;border:1px solid var(--line);border-radius:14px;overflow:hidden;position:relative;transition:transform .18s, box-shadow .18s, border-color .18s}
    .card:hover{transform:translateY(-2px);box-shadow:0 6px 18px rgba(0,0,0,.35);border-color:rgba(212,175,55,.45)}

    /* Media area (fixed height + cover | supports gallery) */
    .media{position:relative;height:200px;overflow:hidden;background:#0e0e12}
    .slides{display:flex;width:100%;height:100%;transition:transform .35s ease}
    .slides img{width:100%;height:100%;object-fit:cover;flex:0 0 100%}

    /* Carousel controls */
    .nav{
      position:absolute;top:50%;transform:translateY(-50%);
      border:1px solid rgba(255,255,255,.35);background:rgba(0,0,0,.45);
      color:#fff;font-weight:800;line-height:1;padding:.35rem .6rem;border-radius:10px;
      cursor:pointer;opacity:0;transition:opacity .2s
    }
    .media:hover .nav{opacity:1}
    .nav.prev{left:8px} .nav.next{right:8px}
    .dots{position:absolute;left:0;right:0;bottom:8px;display:flex;gap:6px;justify-content:center}
    .dot{width:8px;height:8px;border-radius:50%;background:rgba(255,255,255,.35);border:1px solid rgba(255,255,255,.4)}
    .dot.active{background:#ffd76a;border-color:#C99700}

    .meta{padding:12px 14px}
    .name{font-weight:800;cursor:pointer;color:#ffd76a}
    .tags{margin-top:6px;display:flex;gap:6px;flex-wrap:wrap}
    .tag{display:inline-block;font-size:.78rem;color:#fdeec0;background:#1b1710;border:1px solid rgba(212,175,55,.45);padding:.18rem .48rem;border-radius:999px}

    .empty{opacity:.7;text-align:center;padding:24px}
    footer{margin-top:26px;color:#aaa;text-align:center}

    /* Bio overlay (only when name is hovered/tapped) */
    .bio{
      position:absolute;inset:0;display:flex;align-items:flex-end;
      background:linear-gradient(180deg,rgba(0,0,0,0) 40%, rgba(0,0,0,.78) 100%);
      padding:14px;opacity:0;transition:opacity .2s;pointer-events:none
    }
    .bio p{margin:0;color:#eee;font-size:.95rem;line-height:1.35}
    .card.show-bio .bio{opacity:1}
  </style>
</head>
<body>
  <!-- Back to Home -->
  <div class="backbar">
    <a href="index.html">← Back to Home</a>
  </div>

  <div class="wrap">
    <header>
      <a href="index.html" aria-label="Home"><img src="logo.png" alt="Geneius Entertainment"></a>
      <h1>Browse all acts</h1>
    </header>
    <p class="sub">Use search or tap a category. Acts can appear in multiple categories.</p>

    <input id="acts-search" type="search" placeholder="Search by name or tag (e.g. singers, duos, 90s, weddings)…" />

    <div class="chips">
      <span class="chip active" data-tag="all">all</span>
      <span class="chip" data-tag="singers">singers</span>
      <span class="chip" data-tag="duos">duos</span>
      <span class="chip" data-tag="trios">trios</span>
      <span class="chip" data-tag="quartets">quartets</span>
      <span class="chip" data-tag="bands">bands</span>
      <span class="chip" data-tag="tributes">tributes</span>
      <span class="chip" data-tag="djs">djs</span>
      <span class="chip" data-tag="90s">90s</span>
      <span class="chip" data-tag="clubs">clubs</span>
      <span class="chip" data-tag="weddings">weddings</span>
    </div>

    <div id="acts-grid" class="grid"></div>

    <footer>© <span id="y"></span> Geneius Entertainment</footer>
  </div>

  <!-- Load the data first -->
  <script src="talent.js"></script>

  <!-- Page logic (filter + search + render) -->
  <script>
    const TALENT = (window.TALENT || []); // from talent.js

    const grid  = document.getElementById('acts-grid');
    const input = document.getElementById('acts-search');
    const chips = [...document.querySelectorAll('.chip')];
    let activeTag = 'all';

    function cardHTML(a){
      const tags = (a.tags||[]).map(t=>`<span class="tag">${t}</span>`).join('');
      // Use images array if present, else single img
      const imgs = Array.isArray(a.images) && a.images.length ? a.images : [a.img || 'logo.png'];
      return `
        <article class="card" data-id="${a.id||''}">
          <div class="media gallery" tabindex="0">
            <div class="slides">
              ${imgs.map((src,i)=>`<img src="${src}" alt="${a.name} ${i+1}">`).join('')}
            </div>
            ${imgs.length>1 ? `<button class="nav prev" aria-label="Previous">‹</button><button class="nav next" aria-label="Next">›</button>` : ``}
            <div class="dots"></div>
            <div class="bio"><p>${a.bio ? a.bio : ''}</p></div>
          </div>
          <div class="meta">
            <span class="name">${a.name||'Untitled Act'}</span>
            <div class="tags">${tags}</div>
          </div>
        </article>
      `;
    }

    function render(list){
      grid.innerHTML = list.length
        ? list.map(cardHTML).join('')
        : `<div class="empty">No acts match your filters.</div>`;

      // wire up galleries and bio on the newly rendered cards
      grid.querySelectorAll('.card').forEach(card=>{
        const media = card.querySelector('.media');
        const slides= media.querySelector('.slides');
        const imgs  = [...slides.querySelectorAll('img')];
        const prev  = media.querySelector('.nav.prev');
        const next  = media.querySelector('.nav.next');
        const dotsEl= media.querySelector('.dots');
        const nameEl= card.querySelector('.name');

        // Dots
        imgs.forEach((_,i)=>{
          const d=document.createElement('span');
          d.className='dot'+(i===0?' active':'');
          d.addEventListener('click',()=>go(i));
          dotsEl.appendChild(d);
        });

        let index=0;
        function renderSlide(){
          slides.style.transform=`translateX(-${index*100}%)`;
          [...dotsEl.children].forEach((d,i)=>d.classList.toggle('active', i===index));
        }
        function go(i){ index=(i+imgs.length)%imgs.length; renderSlide(); }

        if(prev && next){
          prev.addEventListener('click',()=>go(index-1));
          next.addEventListener('click',()=>go(index+1));
        }

        // Touch swipe
        let startX=0, dx=0;
        slides.addEventListener('touchstart', e=>{startX=e.touches[0].clientX; dx=0;},{passive:true});
        slides.addEventListener('touchmove',  e=>{dx=e.touches[0].clientX-startX;},{passive:true});
        slides.addEventListener('touchend',   ()=>{ if(Math.abs(dx)>40) go(index + (dx<0?1:-1)); });

        // Bio on name hover / tap
        const bio = media.querySelector('.bio');
        function toggleBio(on){ if(!bio)return; card.classList.toggle('show-bio', !!on); }
        nameEl.addEventListener('mouseenter', ()=>toggleBio(true));
        nameEl.addEventListener('mouseleave', ()=>toggleBio(false));
        nameEl.addEventListener('click', (e)=>{ e.preventDefault(); toggleBio(!card.classList.contains('show-bio')); });

        renderSlide();
      });
    }

    function apply(){
      const q = (input.value || '').trim().toLowerCase();
      const out = TALENT.filter(a=>{
        const hay = [a.name, a.bio, ...(a.tags||[])].join(' ').toLowerCase();
        const tagOK = activeTag==='all' || (a.tags||[]).includes(activeTag);
        const qOK = !q || hay.includes(q);
        return tagOK && qOK;
      });
      render(out);
    }

    input.addEventListener('input', apply);
    chips.forEach(c=>c.addEventListener('click',()=>{
      chips.forEach(x=>x.classList.toggle('active', x===c));
      activeTag = c.dataset.tag;
      apply();
    }));

    document.getElementById('y').textContent = new Date().getFullYear();
    render(TALENT); // initial
  </script>
  
  <!-- load shared data + renderer -->
<script src="talent.js"></script>
<script>
  // This tells the renderer which tag to show by default
  window.DEFAULT_TAG = 'singers'; // change for tributes, bands, etc.
</script>
<script src="acts-renderer.js"></script>
  
</body>
</html>
